@mixin scroll-shadow {
    background:
    /* Shadow Cover TOP */ linear-gradient(white 30%, rgba(255, 255, 255, 0)) center top,
        /* Shadow Cover BOTTOM */ linear-gradient(rgba(255, 255, 255, 0), white 70%) center bottom,
        /* Shadow TOP */ linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(197, 197, 197, 0.6)) center top,
        /* Shadow BOTTOM */ linear-gradient(180deg, rgba(255, 255, 255, 0.6), rgba(197, 197, 197, 0.6)) center bottom;

    background-repeat: no-repeat;
    background-size: 100% 70px, 100% 70px, 100% 35px, 100% 35px;
    background-attachment: local, local, scroll, scroll;
}

.widget-dropdown-filter {
    --wdf-outer-spacing: var(--dropdown-outer-spacing, 10px);
    --wdf-spacing: var(--spacing-smaller, 4px);
    --wdf-popover-spacing: 0;
    --wdf-popover-z-index: 50;
    --wdf-popover-shadow: 0px 0px var(--wdf-outer-spacing) 0px var(--shadow-color-border, rgba(0, 0, 0, 0.2));
    --wdf-bd-radius: var(--dropdown-border-radius, 7px);
    --wdf-menu-bg-color: var(--label-info-color, #ffffff);
    --wdf-menu-max-height: var(--dropdown-menu-max-height, 320px);
    --wdf-menu-item-padding: 6px 10px;
    --wdf-highlighted-bg-color: var(--color-default-light, #e6eaff);
    --wdf-selected-bg-color: var(--color-primary-lighter, #f5f6f6);
    --wdf-button-spacing: 8px;
    --wdf-color: var(--gray-dark, black);
    --wdf-state-icon-size: 16px;
    --wdf-toggle-width: calc(4px + var(--wdf-state-icon-size) + var(--wdf-button-spacing));
    --wdf-toggle-inline-end: var(--wdf-toggle-width);
    --wdf-clear-margin: var(--wdf-toggle-inline-end);
    --wdf-clear-inline-spacing: 6px;
    --wdf-clear-border-width: 1px;
    --wdf-clear-width: calc(14px + (var(--wdf-clear-inline-spacing) * 2) + var(--wdf-clear-border-width));
    --wdf-toggle-inline-end-clearable: calc(var(--wdf-clear-width) + var(--wdf-toggle-inline-end));

    &-popover {
        z-index: var(--wdf-popover-z-index);
        box-shadow: var(--wdf-popover-shadow);
        margin-top: var(--wdf-spacing);
        border-radius: var(--wdf-bd-radius);
    }

    &-menu-slot {
        border-radius: inherit;
        background-color: var(--wdf-menu-bg-color);
    }

    &-menu {
        @include scroll-shadow;
        border-radius: inherit;
        margin: 0;
        padding: 0;
        list-style-type: none;
        max-height: var(--wdf-menu-max-height);
        overflow-y: auto;
    }

    &-menu-item {
        display: flex;
        flex-flow: row nowrap;
        align-content: center;
        align-items: center;
        cursor: pointer;
        user-select: none;
        padding: var(--wdf-menu-item-padding);
        height: fit-content;
        overflow: hidden;
        font-weight: normal;
        color: var(--wdf-color);

        &:where([data-highlighted]) {
            background-color: var(--wdf-highlighted-bg-color);
        }
        &:where([data-selected]) {
            background-color: var(--wdf-selected-bg-color);
        }
    }

    &-input {
        border: none;
        margin: 0;
        padding: 0;
    }

    &-toggle,
    &-clear {
        background-color: transparent;
        border: none;
    }

    &-input,
    &-toggle {
        text-align: start;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    &-clear {
        position: absolute;
        padding: 3px 6px;
        align-self: center;
        justify-self: end;
        display: flex;
        margin-inline-end: var(--wdf-clear-margin);
        border-inline-end: 1px solid var(--gray, #787d87);

        &:where([hidden]) {
            display: none;
        }
    }

    &-clear-icon path {
        stroke-width: 0;
    }

    &-toggle,
    &-input {
        color: var(--wdf-color);
        font-weight: normal;
    }

    &-state-icon {
        transition: transform 0.2s;
        [data-expanded="true"] & {
            transform: rotate(180deg);
        }
    }

    &:where(.form-control) {
        padding: 0;
        position: relative;
        display: grid;
    }
}

/* Select variant */
.widget-dropdown-filter {
    &:where(.variant-select) &-toggle {
        padding-block: var(--wdf-button-spacing);
        padding-inline-start: var(--wdf-button-spacing);
        padding-inline-end: var(--wdf-toggle-inline-end);
    }

    &:where(.variant-select):has(&-clear) &-toggle {
        padding-block: var(--wdf-button-spacing);
        padding-inline-start: var(--wdf-button-spacing);
        padding-inline-end: var(--wdf-toggle-inline-end-clearable);
    }

    &:where(.variant-select) &-state-icon {
        position: absolute;
        align-self: center;
        justify-self: end;
        pointer-events: none;
        margin-inline-end: var(--wdf-button-spacing);
    }
}

/* Combobox variant */
.widget-dropdown-filter {
    &:where(.variant-combobox) {
        grid-template-columns: 1fr var(--wdf-toggle-width);
    }

    &:where(.variant-combobox) &-input {
        border-radius: inherit;
        padding-block: var(--wdf-button-spacing);
        padding-inline-start: var(--wdf-button-spacing);
        padding-inline-end: 0;
    }

    &:where(.variant-combobox):has(&-clear) &-input {
        padding-inline-end: var(--wdf-clear-width);
    }

    &:where(.variant-combobox) &-toggle {
        padding-block: var(--wdf-button-spacing);
        padding-inline-start: 4px;
        padding-inline-end: var(--wdf-button-spacing);
        display: flex;
        align-items: center;
    }
}
